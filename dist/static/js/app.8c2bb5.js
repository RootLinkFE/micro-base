(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["CrmBase"]=t():e["CrmBase"]=t()})(window,(function(){return function(e){function t(t){for(var r,a,u=t[0],i=t[1],s=t[2],l=0,p=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(p.length)p.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function u(e){return i.p+"static/js/"+({"account-login":"account-login","error-404":"error-404"}[e]||e)+"."+{"account-login":"138982","error-404":"89fa56"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"account-login":1,"error-404":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({"account-login":"account-login","error-404":"error-404"}[e]||e)+"."+{"account-login":"590fd337","error-404":"101367af"}[e]+".css",o=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(u=0;u<p.length;u++){s=p[u],l=s.getAttribute("data-href");if(l===r||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],d.parentNode.removeChild(d),n(c)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e);var p=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}o[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp_CrmBase"]=window["webpackJsonp_CrmBase"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var p=0;p<s.length;p++)t(s[p]);var d=l;return c.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("56d7")},"08a5":function(e,t,n){"use strict";n("1846")},1846:function(e,t,n){},4340:function(e,t){e.exports="data:image/png;base64,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"},"4e24":function(e,t,n){e.exports=n.p+"img/avatar-girl.0eaa6dac.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"main-app"},[r("el-header",{directives:[{name:"show",rawName:"v-show",value:e.isShowAppHeader,expression:"isShowAppHeader"}],staticClass:"menu-wrapper"},[r("img",{staticClass:"header-logo",attrs:{src:n("62e7"),alt:""}}),r("el-menu",{staticClass:"menu",attrs:{mode:"horizontal","default-active":e.defaultActive,"background-color":"#50c8b9","text-color":"#fff","active-text-color":"#FADD6F"},on:{select:e.onMenuSelect}},e._l(e.menus,(function(t){return r("el-menu-item",{key:t.name,attrs:{index:t.title}},[e._v(" "+e._s(t.title)+" ")])})),1),r("app-header-account")],1),r("el-main",{staticClass:"frame-wrapper"},[r("router-view",{directives:[{name:"show",rawName:"v-show",value:e.$route.name,expression:"$route.name"}]}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.$route.name,expression:"!$route.name"}],attrs:{id:"frame"}})],1)],1)},o=[],c=(n("99af"),n("4de4"),n("7db0"),n("caad"),n("4d63"),n("ac1f"),n("25f0"),n("2909")),u=n("5530"),i=n("2f62"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("div",{staticClass:"app-header-account-wrapper"},[r("el-dropdown",[r("div",{staticClass:"app-header-account-inner"},[r("el-avatar",[r("img",{attrs:{size:34,src:"boy"===e.user.gender?n("4340"):n("4e24"),alt:""}})]),r("span",{staticClass:"nickname"},[e._v(e._s(e.user.nickname))])],1),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[e._v("我的档案")]),r("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.onLogoutButtonClick(t)}}},[e._v("退出登录")])],1)],1)],1):e._e()},l=[],p=n("5f87"),d={name:"app-header-account",computed:Object(u["a"])({},Object(i["b"])({user:function(e){return e.user.data}})),methods:{onLogoutButtonClick:function(){p["c"]()}}},f=d,m=(n("08a5"),n("2877")),h=Object(m["a"])(f,s,l,!1,null,"00d33184",null),g=h.exports,w={state:{isShowAppHeader:!0},mutations:{SET_IS_SHOW_APP_HEADER:function(e,t){e.isShowAppHeader=t}},actions:{}},b=(n("96cf"),n("1da1")),v=n("8daa"),A={state:{data:null},mutations:{SET_CONFIG_DATA:function(e,t){e.data=t}},actions:{getConfigData:function(e){return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,v["a"].auth.get("/v1/auth/admin/crm-sys-cfg");case 4:if(r=t.sent,a=r.code,o=r.data,0===a){t.next=9;break}throw new Error("获取配置信息失败");case 9:n("SET_CONFIG_DATA",o),t.next=15;break;case 12:throw t.prev=12,t.t0=t["catch"](1),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}},S=(n("d81d"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),"departments(title,leaderId,parent,children,dingtalkId,leader,id),realname,nickname,id,mobile,gender,roles(id,name,group(name))"),C="service,route,title,verb,id",E={state:{data:null,roles:null,ROLES_MAP:new Set},mutations:{SET_USER_DATA:function(e,t){e.data=t},SET_USER_ROLES:function(e,t){if("super"!==t){var n=new Set;e.roles=t.map((function(e){var t=e.service,r=e.verb,a=e.route,o=String("[".concat(t,"][").concat(r,"][").concat(a,"]")).toLowerCase();return n.add(o),o})),e.ROLES_MAP=n}else e.roles=t}},actions:{getUserData:function(e){return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,v["a"].auth.get("/v1/auth/admin",{params:{__fields:S}});case 4:if(r=t.sent,a=r.code,o=r.data,0===a){t.next=9;break}throw new Error("获取用户信息失败");case 9:n("SET_USER_DATA",o),t.next=15;break;case 12:throw t.prev=12,t.t0=t["catch"](1),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},getUserRoles:function(e){return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,r={__fields:C},t.next=5,v["a"].auth.get("/v1/auth/admin-http-apis",{params:r});case 5:if(a=t.sent,o=a.code,c=a.data,u=a.more,0===o){t.next=11;break}throw new Error("获取用户权限失败");case 11:if(!u.super){t.next=13;break}return t.abrupt("return",n("SET_USER_ROLES","super"));case 13:if(!Array.isArray(c)||!c.length){t.next=15;break}return t.abrupt("return",n("SET_USER_ROLES",c));case 15:throw new Error("该用户没有任何权限");case 18:throw t.prev=18,t.t0=t["catch"](1),new Error(t.t0);case 21:case"end":return t.stop()}}),t,null,[[1,18]])})))()}}};r["default"].use(i["a"]);var k=new i["a"].Store({state:{},mutations:{},actions:{},modules:{app:w,config:A,user:E}}),O=[{name:"CrmPoster",entry:"//poster-admin.vipthink.cn/",container:"#frame",activeRule:"/#/poster",title:"个性化海报",path:"/poster",props:{store:k}},{name:"CrmGroupon",entry:"//groupon-admin.vipthink.cn/",container:"#frame",activeRule:"/#/groupon",title:"拼团",path:"/groupon",props:{store:k}}],I=O,j=["/account/login","/error/404"],x=[{title:"首页",path:"/"}],R={name:"app",components:{AppHeaderAccount:g},data:function(){return{defaultActive:""}},computed:Object(u["a"])(Object(u["a"])({},Object(i["b"])({isShowAppHeader:function(e){return e.app.isShowAppHeader}})),{},{menus:function(){return[].concat(x,Object(c["a"])(I))}}),watch:{$route:function(e){var t=this.menus.filter((function(t){var n=new RegExp("^".concat(t.path)).test(e.path);return n})),n=t[t.length-1];this.defaultActive=(n||{title:""}).title,this.$store.commit("SET_IS_SHOW_APP_HEADER",!j.includes(e.path))}},mounted:function(){},methods:{onMenuSelect:function(e){if(this.defaultActive!==e){var t=this.menus.find((function(t){return t.title===e}));this.$router.push({path:t.path})}}}},U=R,y=(n("6691"),Object(m["a"])(U,a,o,!1,null,"65e83d02",null)),T=y.exports,P=n("8c4f"),V=n("323e"),B=n.n(V),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page-home"})},Q=[],q={name:"Home",components:{}},H=q,D=(n("8b41"),Object(m["a"])(H,M,Q,!1,null,"eb3e9bb4",null)),L=D.exports,Y=function(){return n.e("account-login").then(n.bind(null,"b6b3"))},z=function(){return n.e("error-404").then(n.bind(null,"2754"))};r["default"].use(P["a"]);var F=[{path:"/",name:"home",component:L},{path:"/account/login",name:"account-login",component:Y},{path:"/error/404",name:"error-404",component:z}],W=new P["a"]({routes:F});W.beforeEach((function(e,t,n){B.a.start(),n()})),W.afterEach((function(){B.a.done()}));var G=W,Z=(n("b0c0"),n("2532"),n("34ac9")),X=n("548a");Object(Z["b"])(I,{beforeLoad:function(e){return B.a.start(),console.log("[LifeCycle] before load %c%s","color: green;",e.name),Promise.resolve()},afterMount:function(e){return B.a.done(),console.log("[LifeCycle] before mount %c%s","color: green;",e.name),Promise.resolve()},afterUnmount:function(e){return console.log("[LifeCycle] after unmount %c%s","color: green;",e.name),Promise.resolve()}}),Object(X["a"])((function(e){B.a.remove(),console.log("global uncaught error ",e);var t=e.message;t&&t.includes("died in status LOADING_SOURCE_CODE")&&console.log("micro app run fail")}));var K=function(e){return fetch(e,{headers:{"Access-Control-Allow-Origin":"*"}})},N={request:K,prefetch:!1},J={start:function(){return Object(Z["c"])(N)}};B.a.configure({showSpinner:!1});var _="/account/login";G.beforeEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.path===_,!a){e.next=3;break}return e.abrupt("return",r());case 3:if(p["b"]().Authorization){e.next=5;break}return e.abrupt("return",r({path:_,replace:!0}));case 5:try{k.state.user.data||k.dispatch("getUserData").then(Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.dispatch("getUserRoles");case 2:return e.next=4,k.dispatch("getConfigData");case 4:return e.next=6,p["a"]();case 6:case"end":return e.stop()}}),e)})))).catch((function(){return r({path:_,replace:!0})})),r()}catch(n){B.a.done(),console.log(n)}case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());n("45fc");G.beforeEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.name){e.next=2;break}return e.abrupt("return",r());case 2:if(!I.some((function(e){return t.path.includes(e.path)}))){e.next=4;break}return e.abrupt("return",r());case 4:r({name:"error-404"});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());n("0fb7"),n("450d");var $=n("f529"),ee=n.n($),te=(n("bd49"),n("18ff")),ne=n.n(te),re=(n("960d"),n("defb")),ae=n.n(re),oe=(n("cb70"),n("b370")),ce=n.n(oe),ue=(n("920a"),n("4f0c")),ie=n.n(ue),se=(n("10cb"),n("f3ad")),le=n.n(se),pe=(n("eca7"),n("3787")),de=n.n(pe),fe=(n("425f"),n("4105")),me=n.n(fe),he=(n("b8e0"),n("a4c4")),ge=n.n(he),we=(n("8bd8"),n("4cb2")),be=n.n(we),ve=(n("4ca3"),n("443e")),Ae=n.n(ve),Se=(n("de31"),n("c69e")),Ce=n.n(Se),Ee=(n("a673"),n("7b31")),ke=n.n(Ee),Oe=(n("adec"),n("3d2d")),Ie=n.n(Oe),je=(n("1951"),n("eedf")),xe=n.n(je);r["default"].prototype.$ELEMENT={size:"small"},r["default"].use(xe.a),r["default"].component(Ie.a.name,Ie.a),r["default"].component(ke.a.name,ke.a),r["default"].component(Ce.a.name,Ce.a),r["default"].component(Ae.a.name,Ae.a),r["default"].component(be.a.name,be.a),r["default"].component(ge.a.name,ge.a),r["default"].component(me.a.name,me.a),r["default"].component(de.a.name,de.a),r["default"].component(le.a.name,le.a),r["default"].component(ie.a.name,ie.a),r["default"].component(ce.a.name,ce.a),r["default"].component(ae.a.name,ae.a),r["default"].component(ne.a.name,ne.a),r["default"].prototype.$message=ee.a;n("a5d8"),n("b20f"),n("f5fa");document.title="快乐种子｜营销中心后台",r["default"].config.productionTip=!1,r["default"].prototype.$http=v["a"];var Re=!1;G.beforeEach((function(e,t,n){Re||(Re=!0,J.start()),n()})),new r["default"]({router:G,store:k,render:function(e){return e(T)}}).$mount("#app")},"5f87":function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return g}));n("0fb7"),n("450d");var r=n("f529"),a=n.n(r),o=(n("96cf"),n("1da1")),c=n("8daa"),u="crm-token",i="old-crm-token",s=function(e){var t={Authorization:"Bearer ".concat(e)};localStorage.setItem(u,JSON.stringify(t))},l=function(){var e=localStorage.getItem(u);return e?JSON.parse(e):{}},p=function(){localStorage.removeItem(u)},d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].auth.delete("/v1/auth/admin/token");case 3:return e.prev=3,p(),location.reload(),e.finish(3);case 7:case"end":return e.stop()}}),e,null,[[0,,3,7]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].auth.get("/v1/auth/admin/token-ugly-crm");case 2:if(t=e.sent,n=t.code,r=t.data,0===n){e.next=7;break}throw new Error("获取用户凭证失败");case 7:m(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){localStorage.setItem(i,JSON.stringify(e))},h="登录信息已过期，需要重新登录",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=2e3,n={duration:t,message:"".concat(e,"，即将跳转到登录页面..."),type:"error"};a()(n),setTimeout(d,t)}},"62e7":function(e,t,n){e.exports=n.p+"img/header-logo.02a4de60.png"},6691:function(e,t,n){"use strict";n("892f")},"892f":function(e,t,n){},"8b41":function(e,t,n){"use strict";n("e508")},"8daa":function(e,t,n){"use strict";n("caad"),n("d3b7"),n("2532");var r=n("bc3a"),a=n.n(r),o=n("5f87"),c="/account/login",u=a.a.CancelToken.source(),i=a.a.create();i.defaults.baseURL="https://auth.vipthink.cn",i.defaults.timeout=6e4,i.interceptors.request.use((function(e){return e})),i.interceptors.request.use((function(e){return Object.assign(e.headers,o["b"]()),e.cancelToken=u.token,e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.response;if(t){var n=t.status,r=location,i=r.href;401!==n||i.includes(c)||(u.cancel(),u=a.a.CancelToken.source(),o["d"]())}return a.a.isCancel(e)&&console.log("后续请求已取消"),Promise.reject(e)}));var s=i;t["a"]={auth:s}},b20f:function(e,t,n){},e508:function(e,t,n){},f5fa:function(e,t,n){}})}));
//# sourceMappingURL=app.8c2bb5.js.map